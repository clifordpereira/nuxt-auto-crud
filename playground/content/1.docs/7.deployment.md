---
title: Production Deployment
description: Strategic guide for deploying the nuxt-auto-crud stack to Cloudflare.
---

## üõ† Deployment Workflow

### 1. Cloudflare D1 Provisioning
Create the production database instance in the Cloudflare dashboard. [Youtube Demo](https://www.youtube.com/watch?v=bbuKgfV-I44&list=PLnbvxcojhIixqM1J08Tnm7vmMdx2wsy4B&index=5)

```code
Storage & Databases > D1 SQL Database > Create Database
```

### 2. Configuration (`wrangler.toml`)

Copy & Paste the newly created Database Id and Name to wrangler.toml

```toml
# wrangler.toml
name = "nuxt-auto-crud-template"
compatibility_date = "2024-11-27"
main = ".output/server/index.mjs"

compatibility_flags = ["nodejs_compat"]
[[d1_databases]]
binding = "DB"
database_name = "your-db-name"
database_id = "your-db-id"
migrations_dir = "server/db/migrations/sqlite"

[observability]
enabled = true
head_sampling_rate = 1

[assets]
directory = ".output/public"
binding = "ASSETS"
```

### 3. Remote Migrations
Apply your Drizzle schema to the remote D1 instance.
```bash
npx wrangler d1 migrations apply <DATABASE_NAME> --remote
```
> Or change your DATABASE_NAME In package.json and run command `bun migrate:remote`.

### 4. Create Application on Cloudflare
```code
Compute & AI > Workers & Pages > Create Application > Select Repository > Deploy
```
> Ensure Project name matches the name in wrangler.toml

### 5. Admin Initialization
Once the application is successfully deployed, click the 'Sign In' button in the top right corner. The first login with the `NUXT_ADMIN_EMAIL` will trigger the `db:seed` task to hydrate roles and permissions.

## üîê Production Environment Variables
Set these via the Cloudflare dashboard. [Youtube Demo](https://www.youtube.com/watch?v=bh5EkArlb-E&list=PLnbvxcojhIixqM1J08Tnm7vmMdx2wsy4B&index=6)

| Variable | Importance | Description |
| :--- | :--- | :--- |
| `NUXT_SESSION_PASSWORD` | **Critical** | Minimum 32 characters for session encryption. |
| `NUXT_ADMIN_EMAIL` | **Required** | Seed target for the root admin user. |
| `NUXT_ADMIN_PASSWORD` | **Required** | Initial credential for first-access hydration. |

## üö¶ Post-Deployment Checklist
1.  **Admin email**: Ensure `NUXT_ADMIN_EMAIL` & `NUXT_ADMIN_PASSWORD` is set
2.  **Session password**: Ensure `NUXT_SESSION_PASSWORD` is unique to production.
3. **Roles**: Default roles are set in app.config.ts before seeding.
4. **Permissions**: Use the template's Admin UI to finalize production-specific RBAC rules. [Youtube Demo](https://www.youtube.com/watch?v=Ot3qMzWe4OU&list=PLnbvxcojhIixqM1J08Tnm7vmMdx2wsy4B&index=4)
